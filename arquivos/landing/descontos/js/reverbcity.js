function form_validate(e){var t=true;var n={pl:{email:"Podany adres e-mail jest niepoprawny",required:"To pole jest wymagane"},en:{email:"This e-mail address is not valid",required:"This field is required"}};e.find(".validate-group").each(function(){_this=$(this);if(_this.find("req-email")&&!email_validate(_this.find(".req-email").val())){_this.find(".message-error").html(n[rd.lang]["email"]).addClass("show");_form.addClass("error");t=false}if(_this.find(".req").val()==""){_this.find(".message-error").html(n[rd.lang]["required"]).addClass("show");_form.addClass("error");t=false}});if(!t){return false}_form.submit()}function email_validate(e){var t=/^\w+[\+\.\w-]*@([\w-]+\.)*\w+[\w-]*\.([a-z]{2,4}|\d+)$/i;return t.test(e)}function postalcode_validate(e){var t=/^[0-9]{2}\-[0-9]{3}$/;return t.test(e)}var loader={_this:null,init:function(){this._this=$("#loader")},show:function(){loader._this.addClass("open")},hide:function(){loader._this.removeClass("open")}};var errors={pl:{email:"Podany adres e-mail jest niepoprawny",required:"To pole jest wymagane",postalcode:"Podany kod pocztowy jest niepoprawny"},en:{email:"This e-mail address is not valid",required:"This field is required"}};var order_form={form:$("#overlay .order_form"),product:null,valid:true,fields:{},error_field:null,product_name:null,init:function(){order_form.bindActions()},createForm:function(e){order_form.form=$("#overlay .order_form");order_form.product=e;order_form.setupColors(e);order_form.loadValuesFromCookies();order_form.setupFields();order_form.form.find(".order_button").attr("id","order_button");order_form.product_name=e.find(".product-description h1").html();order_form.form.siblings(".product-title").html(order_form.product_name)},setupFields:function(){$("#overlay .order_form .validate").each(function(e){_this=$(this);order_form.fields[_this.attr("id")]=_this});order_form.error_field=order_form.form.find(".field-text")},bindActions:function(){$(document).on("focusout","#overlay .remind",function(){_this=$(this);$.cookie(_this.attr("id"),_this.val())});$(document).on("change","#delivery",function(){order_form.updatePrice($(this).val())});$(document).on("click","#order_button",function(){order_form.processForm()})},updatePrice:function(e){if(typeof e=="undefined"){delivery_price=0}else{delivery_price=parseInt(e)}product_price=parseInt(order_form.product.find(".price").html());overall_price=product_price+delivery_price;order_form.form.find(".price").html(overall_price)},setupColors:function(e){available_colors=order_form.form.find(".available-colors");available_colors.html("");e.find(".colors .color").each(function(e){_this=$(this);is_checked=false;color_name=_this.find(".color-name").html();color_img=_this.find("img").attr("src");color_class="color-option";if(_this.find(".color-image").hasClass("selected")){is_checked=true;color_class="color-option active"}color='<div class="'+color_class+'"><input type="radio" name="color" value="'+color_name+'"><img src="'+color_img+'"></div>';available_colors.append(color)})},loadValuesFromCookies:function(){order_form.form.find(".remind").each(function(e){_this=$(this);id=_this.attr("id");val=$.cookie(id);if(id==="delivery"){order_form.updatePrice(val)}if(typeof val!="undefined"){_this.val(val)}})},clearCookies:function(){order_form.form.find(".remind").each(function(e){_this=$(this);$.removeCookie(_this.attr("id"))})},processForm:function(){for(var e in order_form.fields){order_form.fields[e].removeClass("error")}order_form.error_field.html("").parent().removeClass("fail");if(order_form.valid){var t=order_form.form.find("input[name=name]").val();var n=order_form.form.find("input[name=email]").val();var r=order_form.form.find("input[name=street]").val();var i=order_form.form.find("input[name=city]").val();var s=order_form.form.find("select#country").val();var o=order_form.form.find("input[name=postalcode]").val();var u=order_form.form.find("select#delivery").val();var a=order_form.form.find("select#delivery option[value="+u+"]").text();var f=order_form.form.find("input[name=color]").val();var l=order_form.form.find("select#size").val();var c=order_form.product_name;var h=order_form.form.find(".price").html();post_data={name:t,email:n,street:r,city:i,postalcode:o,delivery:u,color:f,size:l,country:s,lang:rd.lang,product_name:c,delivery_name:a,order_cost:h};loader.show();$.post("process_order.php",post_data,function(e){if(e.type=="error"){if(typeof e.field!="undefined"){order_form.fields[e.field].addClass("error");order_form.error_field.html(e.text).parent().addClass("fail");loader.hide()}}else{loader.hide();order_form.form.parents(".order_form_container").html(e.text)}},"json")}}};var overlay={init:function(){this._this=$("#overlay");$(document).keyup(function(e){if(e.keyCode===27){overlay.hide()}});$(document).on("click",".close-order_form, #close_button",function(){overlay.hide()});overlay._this.click(function(e){if(e.target===this){overlay.hide()}})},show:function(e){overlay._this.html("");overlay._this.addClass("open");if(e){$("."+e.attr("data-message-id")).clone(true,true).appendTo(overlay._this)}},updateContent:function(e){overlay._this.html(e)},hide:function(){overlay._this.removeClass("open")}};var rd={isInitiated:false,pageWidth:window.innerWidth,mobileScreen:768,isMobile:false,productColorSelector:".color-image",lang:false,init:function(){this.checkMobile();this.setColors();this.setResizeEvent();this.productActions();overlay.init();loader.init();this.isInitiated=true;order_form.init();this.lang=$("html").attr("lang");this.initWaypoints()},refresh:function(){this.pageWidth=window.innerWidth;rd.checkMobile()},checkMobile:function(){if(this.pageWidth<this.mobileScreen){$("html").addClass("mobile").removeClass("desktop");this.isMobile=true}else{$("html").removeClass("mobile").addClass("desktop");this.isMobile=false}},setColors:function(){$(".color span").each(function(e){_this=$(this);_this.css({"background-color":_this.attr("data-color")})})},setResizeEvent:function(){$(window).resize(function(){if(this.resizeTO)clearTimeout(this.resizeTO);this.resizeTO=setTimeout(function(){$(this).trigger("resizeEnd")},300)});$(window).bind("resizeEnd",function(){if(rd.isInitiated){rd.refresh()}})},productActions:function(){$(this.productColorSelector).on("mousedown",function(){_this=$(this);_target=$("#"+_this.attr("data-product-id"));if(!_target.hasClass("active")){_this.parents(".colors").find(".color-image").removeClass("selected");_this.addClass("selected");_target.siblings().removeClass("active");_target.addClass("active")}})},initWaypoints:function(){$(".advantages .advantage .icon").waypoint(function(){$(this).addClass("animate")},{offset:"80%"});$(".advantages .advantage .text").waypoint(function(){$(this).addClass("animate")},{offset:"80%"});$(".fejs-button").waypoint(function(){$(this).addClass("animate")},{offset:"90%"});$(".newsletter-form").waypoint(function(){$(this).addClass("animate")},{offset:"90%"});$("section.newsletter").waypoint(function(){$(this).addClass("animate")},{offset:"80%"});$(".product").waypoint(function(){$(this).addClass("animate")},{offset:"80%"});$(".bible").waypoint(function(){$(this).addClass("animate")},{offset:"80%"});$(".quotes").waypoint(function(){$(this).addClass("animate")},{offset:"80%"})}};$(document).ready(function(){function e(){rd.init();$(".button-submit").click(function(e){e.preventDefault();_form=$(this).parents("form");_form.removeClass("error");_form.find(".show").removeClass("show");setTimeout(function(){form_validate(_form)},0)});$(".color-image").hover(function(){_this=$(this);_this.siblings(".color-name").css({display:"block"}).animate({"background-color":"#161616"},1,function(){$(this).addClass("active")})},function(){_this.siblings(".color-name").removeClass("active").animate({"background-color":"#161616"},200,function(){$(this).css({display:"none"})})});var e=$(".quotes");var t=e.find(".quote").length;e.find(".quote").each(function(e){$(this).attr("data-position",e+1)});$(".bible").click(function(n){_this=$(this);active=e.find(".active");active.removeClass("active");if(active.attr("data-position")==t){active.siblings().first().addClass("active")}else{active.next(".quote").addClass("active")}});$(".newsletter-privacy-statement").click(function(e){e.preventDefault();overlay.show($(this))});$(".message-hide").click(function(e){overlay.hide()});$(".content-scroll").mCustomScrollbar({mouseWheel:{scrollAmount:10}});$(document).on("click",".color-option input",function(){_this=$(this);$(".color-option").removeClass("active");_this.parent().addClass("active")})}Pace.on("done",function(){e()})})