$(function(){reverb.meProfile();reverb.listaramigos();reverb.meListarFotos();reverb.meListarVideos();reverb.meListarPosts();reverb.listarwishlist();reverb.listarcycle();reverb.meListaRecados();reverb.alterarDados()});reverb.meProfile=function(){$(".edit-info").on({click:function(e){e.preventDefault();$(this).toggleClass("record");if($(this).hasClass("record")){$(this).text("Gravar");$("#reverbme-profile input[readonly]").each(function(){$(this).removeAttr("readonly")})}else{$(this).text("Alterar dados");$('#reverbme-profile input[data-readable="true"]').each(function(){$(this).attr("readonly",true)});var t={nome:$("#nome").val(),ocupacao:$("#ocupacao").val(),cidade:$("#cidade").val(),bandas:$("#bandas").val(),twitter:$("#twitter").val(),facebook:$("#facebook").val(),json:true};$.ajax({url:$("#reverbme-profile").attr("action"),type:"POST",dataType:"json",data:t}).done(function(){reverb.alertMessage("success","Dados alterados com sucesso")}).fail(function(){reverb.alertMessage("error","Ocorreu algum erro ao alterar os dados :/")})}}});$(".label-checkbox input").change(function(){$(this).parent().toggleClass("active")});$(".rvb-my-orders .btn-detail").on("click",function(e){e.preventDefault();$(this).toggleClass("opened")});$(".rvb-privacy .btn-detail").on("click",function(e){e.preventDefault();$(".rvb-privacy .btn-detail").removeClass("inactive");$(this).addClass("inactive")});var e=$(".xp-bar .progress"),t=e.attr("data-value"),n=e.css({width:t});tinymce.init({selector:"#full-post",theme:"modern",skin:"light",plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code emoticons","insertdatetime media table contextmenu paste"],menubar:false,toolbar:"image media link | bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | bullist numlist | emoticons",theme_advanced_toolbar_location:"bottom",statusbar:false})};var root=typeof exports!=="undefined"&&exports!==null?exports:this;root.getfDates=function(e){var t=new Date(e),n=t.getHours(),r=t.getMinutes(),i=t.getSeconds(),s=n+":"+r+":"+i,o=t.getDate(),u=t.getMonth(),a=t.getFullYear(),f=o+"/"+u+"/"+a;return{horas:n,minutos:r,segundos:i,horasFormatado:s,dias:o,mes:u,ano:a,dataFormatado:f}};reverb.socialItems=function(e){var t=$("<ul>",{"class":"social-media"});for(var n=0;n<4;n++){var r=$("<li>",{"class":"social-media-items",appendTo:t}),i=$("<a>",{href:e,appendTo:r});if(n==0){i.addClass("icon user-facebook")}else if(n==1){i.addClass("icon user-twitter")}else if(n==2){i.addClass("icon user-pinterest")}else if(n==3){i.addClass("icon user-tumblr")}}return t};reverb.meListarFotos=function(){$("#pagination-gallery").ajaxpagination(document.basePath+"/json/listafotos",function(e){var t,n,r,i;var s=document.basePath+"/thumb/people/1/140/110/",o=$("ul.rvb-list-of-photos");o.html("");for(t=r=0,i=e.items.length;r<i;t=++r){n=e.items[t];var u="";u+='<li class="rvb-photo-item">';u+='<a href="#" class="photo-thumb">';u+='<img src="'+s+n["NR_SEQ_FOTO_FORC"]+"."+n["DS_EXT_FORC"]+'" alt="'+n["DS_NOME_FORC"]+'">';u+="</a>";u+='<a href="#" class="photo-link">'+n["DS_NOME_FORC"]+"</a>";u+='<span class="comments">Comentários: '+n["total_coments"]+"</span>";u+='<span class="views">Views: '+n["NR_VIEWS_FORC"]+"</span>";u+='<a href="#" data-foto-id="'+n["NR_SEQ_FOTO_FORC"]+'" class="md-close ir" title="Excluir foto">Excluir</a>';u+='<ul class="social-share-small">';u+='<li class="social-item"><a href="#" class="social-link ir facebook" target="_blank">Facebook</a></li>';u+='<li class="social-item"><a href="#" class="social-link ir twitter" target="_blank">Twitter</a></li>';u+='<li class="social-item"><a href="#" class="social-link ir tumblr" target="_blank">Tumblr</a></li>';u+='<li class="social-item"><a href="#" class="social-link ir pinterest" target="_blank">Pinterest</a></li>';u+="</ul>";u+="</li>";o.append(u)}$("ul.rvb-list-of-photos .rvb-photo-item .md-close").on("click",function(e){e.preventDefault();var t=$(this),n=$(this).attr("data-foto-id"),r=confirm("Quer mesmo excluir esta foto?");if(r){$.ajax({url:document.basePath+"/reverbme/removerfoto/idfoto/"+n,type:"post",contenType:"application/json"}).done(function(e){t.parent().fadeOut(600,function(){$(this).remove()})})}})})};reverb.meListarVideos=function(){$("#pagination-videos").ajaxpagination(document.basePath+"/json/listavideos",function(e){var t,n,r,i;var s=$("ul.rvb-list-of-videos");s.html("");for(t=r=0,i=e.items.length;r<i;t=++r){n=e.items[t];var o="youtube.com/v/",u=n["DS_YOUTUBE_VIRC"].indexOf(o),a=n["DS_YOUTUBE_VIRC"].substr(u),f="";a=a.replace(o,"");a=a.substr(0,11);n.idYoutube=a;f+='<li class="rvb-video-item">';f+='<a href="'+n["DS_YOUTUBE_VIRC"]+'" class="video-thumb">';f+='<img src="http://img.youtube.com/vi/'+n["idYoutube"]+'/default.jpg" alt="'+n["DS_NOME_VIRC"]+'">';f+="</a>";f+='<a href="'+n["DS_YOUTUBE_VIRC"]+'" title="Link para o vídeo no YouTube" class="video-link" target="_blank">'+n["DS_NOME_VIRC"]+"</a>";f+='<a href="#" data-video-id="'+n["NR_SEQ_VIDEO_VIRC"]+'" class="md-close ir" title="Excluir vídeo">Excluir</a>';f+='<ul class="social-share-small">';f+='<li class="social-item"><a href="#" class="social-link ir facebook" target="_blank">Facebook</a></li>';f+='<li class="social-item"><a href="#" class="social-link ir twitter" target="_blank">Twitter</a></li>';f+='<li class="social-item"><a href="#" class="social-link ir tumblr" target="_blank">Tumblr</a></li>';f+='<li class="social-item"><a href="#" class="social-link ir pinterest" target="_blank">Pinterest</a></li>';f+="</ul>";f+="</li>";s.append(f)}$("ul.rvb-list-of-videos .rvb-video-item .md-close").on("click",function(e){e.preventDefault();var t=$(this),n=$(this).attr("data-video-id"),r=confirm("Quer mesmo excluir este vídeo?");if(r){$.ajax({url:document.basePath+"/reverbme/removervideo/idvideo/"+n,type:"post",contenType:"application/json"}).done(function(e){t.parent().fadeOut(600,function(){$(this).remove()})})}})})};reverb.meListarPosts=function(){$("#pagination-posts").ajaxpagination(document.basePath+"/json/listaposts",function(e){var t,n,r,i,s=$("div.latest-posts");s.html("");for(t=r=0,i=e.items.length;r<i;t=++r){n=e.items[t];console.log(n);var o=document.basePath+"/produto/";var u=n["titulo"].replace(/[\s\,\(\)\\]/g,"").toLowerCase(),a="";a+='<div class="latest-post">';a+='<a href="#" data-post-id="'+n["idme_blog"]+'" class="md-close ir" title="Remover post">Excluir</a>';a+='<a href="#" class="post-thumb">';a+='<img src="http://dummyimage.com/120x143/888/ccc" alt="'+n["titulo"]+'">';a+="</a>";a+='<a href="#" class="post-title">'+n["titulo"]+"</a>";a+='<p class="post-date">'+n["data_publicacao"]+' Por: <span class="post-author">ReverbCity</span></p>';a+='<p class="post-tiny-description">'+n["post"]+"</p>";a+='<a href="#" class="button comments">0 comentários</a>';a+='<a href="#" class="button read-post">Ler post completo</a>';a+="</div>";s.append(a)}$("div.latest-posts .latest-post .md-close").on("click",function(e){e.preventDefault();var t=$(this),n=$(this).attr("data-post-id"),r=confirm("Quer mesmo remover este post?");if(r){$.ajax({url:document.basePath+"/reverbme/removerblog/idblog/"+n,type:"post",contenType:"application/json"}).done(function(e){t.parent().fadeOut(600,function(){$(this).remove()})})}})})};reverb.listaramigos=function(){$("#pagination-friends").ajaxpagination(document.basePath+"/json/listaamigos",function(e){var t,n,r,i;var s=document.basePath+"/thumb/reverbme/1/103/90/",o=document.basePath+"/perfil/",u=$("ul.rvb-list-of-friends");u.html("");for(t=r=0,i=e.items.length;r<i;t=++r){n=e.items[t];var a=n["DS_NOME_CASO"].replace(/\s/g,"").toLowerCase(),f="";if((t+1)%4===0){f+='<li class="last">'}else{f+="<li>"}f+='<a href="'+o+a+"/"+n["NR_SEQ_AMIGO_FRRC"]+'" class="profile-thumb">';f+='<img src="'+s+n["NR_SEQ_AMIGO_FRRC"]+"."+n["DS_EXT_CACH"]+'">';f+="</a>";f+='<a href="'+o+a+"/"+n["NR_SEQ_AMIGO_FRRC"]+'" title="Visualizar perfil de '+n["DS_NOME_CASO"]+'" class="profile-link">'+n["DS_NOME_CASO"]+"</a>";f+="</li>";u.append(f)}})};reverb.meListaRecados=function(){$("#pagination-scraps").ajaxpagination(document.basePath+"/json/listarecados",function(e){var t,n,r,i;var s=$("div.list-of-scraps");s.html("");for(t=r=0,i=e.items.length;r<i;t=++r){n=e.items[t];n.horaData=root.getfDates(n["DT_POST_SBRC"]);console.log("recados: ",n);var o="";o+='<div class="rvb-comment-box">';o+='<a href="#" data-message-id="'+n["NR_SEQ_CADASTRO_SBRC"]+'" class="md-close ir" title="Remover mensagem">Excluir</a>';o+='<p class="rvb-comment-author-name">'+n["DS_NOME_CASO"]+"</p>";o+='<p class="rvb-comment-date">'+n["DT_POST_SBRC"]+"</p>";o+='<div class="rvb-comment-message">'+n["DS_POST_SBRC"]+"</div>";o+='<div class="rvb-comment-buttons">';o+='<a href="#" class="button">Responder |</a>';o+='<a href="#" class="button">Excluir</a>';o+="</div>";o+="</div>";s.append(o)}$("div.list-of-scraps .rvb-comment-box .md-close").on("click",function(e){e.preventDefault();var t=$(this),n=$(this).attr("data-message-id"),r=confirm("Quer mesmo remover esta mensagem?");if(r){$.ajax({url:document.basePath+"/reverbme/deletarrecado/idrecado/"+n,type:"post",contenType:"application/json"}).done(function(e){t.parent().fadeOut(600,function(){$(this).remove()})})}})})};reverb.listarcycle=function(){$("#pagination-cycle").ajaxpagination(document.basePath+"/json/listarcycle",function(e){var t,n,r,i;var s=$("ul.rvb-list-of-photos-cycle");s.html("");for(t=r=0,i=e.items.length;r<i;t=++r){n=e.items[t];var o=document.basePath+"/thumb/reverbcycle/1/140/110/",u=document.basePath+"/cycle-detalhe/";var a=n["DS_OBJETO_RCRC"].replace(/[\s\,\(\)\\]/g,"").toLowerCase(),f="";if((t+1)%3===0){f+='<li class="rvb-photo-item last">'}else{f+='<li class="rvb-photo-item">'}f+='<a href="'+u+a+"/"+n["NR_SEQ_REVERBCYCLE_RCRC"]+'" class="photo-thumb">';f+='<img src="'+o+n["NR_SEQ_REVERBCYCLE_RCRC"]+"."+n["DS_EXT_CACH"]+'" alt="'+n["DS_OBJETO_RCRC"]+'">';f+="</a>";f+='<a href="'+u+a+"/"+n["NR_SEQ_REVERBCYCLE_RCRC"]+'" class="photo-link">'+n["DS_OBJETO_RCRC"]+"</a>";f+='<span class="comments">Comentários: 0</span>';f+='<span class="views">Views: '+n["NR_VIEWS_RCRC"]+"</span>";f+='<ul class="social-share-small">';f+='<li class="social-item"><a href="#" class="social-link ir facebook" target="_blank">Facebook</a></li>';f+='<li class="social-item"><a href="#" class="social-link ir twitter" target="_blank">Twitter</a></li>';f+='<li class="social-item"><a href="#" class="social-link ir tumblr" target="_blank">Tumblr</a></li>';f+='<li class="social-item"><a href="#" class="social-link ir pinterest" target="_blank">Pinterest</a></li>';f+="</ul>";f+="</li>";s.append(f)}})};reverb.listarwishlist=function(){$("#pagination-wishlist").ajaxpagination(document.basePath+"/json/listarwishlist",function(e){var t,n,r,i;var s=$("ul.rvb-list-of-wishlist");s.html("");for(t=r=0,i=e.items.length;r<i;t=++r){n=e.items[t];var o=document.basePath+"/thumb/produtos/1/140/110/",u=document.basePath+"/produto/";_name=n["DS_PRODUTO_PRRC"].replace(/[\s\,\(\)\\]/g,"").toLowerCase(),resultItem="";if((t+1)%3===0){resultItem+='<li class="rvb-photo-item last">'}else{resultItem+='<li class="rvb-photo-item">'}resultItem+='<a href="'+u+_name+"/"+n["NR_SEQ_PRODUTO_PRRC"]+'" class="photo-thumb">';resultItem+='<img src="'+o+n["NR_SEQ_PRODUTO_PRRC"]+"."+n["DS_EXT_PRRC"]+'" alt="'+n["DS_PRODUTO_PRRC"]+'">';resultItem+="</a>";resultItem+='<a href="'+u+_name+"/"+n["NR_SEQ_PRODUTO_PRRC"]+'" class="photo-link">'+n["DS_PRODUTO_PRRC"]+"</a>";resultItem+='<a href="#" class="md-close ir" title="Excluir este produto da minha wishlist">Excluir</a>';resultItem+='<ul class="social-share-small">';resultItem+='<li class="social-item"><a href="#" class="social-link ir facebook" target="_blank">Facebook</a></li>';resultItem+='<li class="social-item"><a href="#" class="social-link ir twitter" target="_blank">Twitter</a></li>';resultItem+='<li class="social-item"><a href="#" class="social-link ir tumblr" target="_blank">Tumblr</a></li>';resultItem+='<li class="social-item"><a href="#" class="social-link ir pinterest" target="_blank">Pinterest</a></li>';resultItem+="</ul>";resultItem+="</li>";s.append(resultItem)}})};reverb.alterarDados=function(){$("#imagem_perfil").on("change",function(e){$(this).closest("form").submit()})};$("#searchFriendButton").on("click",function(e){e.preventDefault();var t=$("#pagination-friends").ajaxpagination();var n=$("#searchFriendInput").val();t.filter(n)})